@using Zeta.AgentosCRM.Web.Areas.AppAreaName.Models.Clients.ClientQuotations;
@model CreateOrEditClientQuotationsViewModel
@section Scripts
    {
    <script abp-src="/view-resources/Areas/AppAreaName/Views/Clients/ClientsQuotation/QuotationPreview.js" asp-append-version="true"></script>
	<script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>

}
@section Styles
  {
    <link rel="stylesheet" abp-href="/view-resources/Areas/AppAreaName/Views/Common/_PartialCardView.css" asp-append-version="true" />
    

  }

<div class="@(await GetContainerClass())">
    <div class="card card-custom gutter-b">
<div class="d-flex flex-column flex-root app-root" id="kt_app_root">
	<!--begin::Page-->
	<div class="app-page flex-column flex-column-fluid" id="kt_app_page">
		<!--begin::Header-->
		@* <div id="kt_app_header" class="app-header" data-kt-sticky="true" data-kt-sticky-activate="{default: true, lg: true}" data-kt-sticky-name="app-header-minimize" data-kt-sticky-offset="{default: '200px', lg: '0'}" data-kt-sticky-animation="false"> *@
			<!--begin::Header container-->
			  
			<!--begin::Main-->
			<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
				<!--begin::Content wrapper-->
				<div class="d-flex flex-column flex-column-fluid">
					<!--begin::Toolbar-->
					 
					<!--end::Toolbar-->
					<!--begin::Content-->
					<div id="kt_app_content" class="app-content flex-column-fluid">
						<!--begin::Content container-->
						<div id="kt_app_content_container" class="" style="overflow: visible;">
							<!-- begin::Invoice 1-->
							<div class="card">
								<!-- begin::Body-->
								<div class="card-body py-20">
									<!-- begin::Wrapper-->
									<div class="mw-lg-950px mx-auto w-100">
										<!-- begin::Header-->
											<div class="d-flex justify-content-between flex-column flex-sm-row h12" >
											<h4 class="fw-bolder text-white fs-2qx pt-7 px-3 pb-7 ">Quotation</h4>
											<!--end::Logo-->
											<div class="text-sm-end">
												<!--begin::Logo--> 
												<img alt="Logo" src="" id="logoImg" class="h-70px pt-3"> 
											</div>
										</div>
										<hr/>
										<div>
              <h4 class="fw-bolder text-gray-800 fs-2px ">Client Details</h4>
										</div>
								<div class=" row col-lg-12 ">
                               <div class="col-lg-10 ">
                                <p id="ClientId" class="mb-0 ">@Model.ClientQuotationHead.ClientName</p>
								</div>
								<div class="col-lg-2 ">
									  <p id="ClientId" class="mb-0"><strong>Date:</strong>@Model.ClientQuotationHead.DueDate.ToString("yyyy-MM-dd")</p>
							</div>
                            </div>
							<br/>
							<div class="col-lg-12 ">

							<p id="ClientId" class="mb-0">@Model.ClientQuotationHead.ClientEmail</p>
                            </div>
										<!--end::Header-->
										<!--begin::Body-->
										<div class="pb-12">
											<!--begin::Image-->
											@* <div class="d-flex flex-row-fluid bgi-no-repeat bgi-position-x-center bgi-size-cover card-rounded h-150px h-lg-250px mb-lg-20" style="background-image: url(assets/media/misc/pattern-4.jpg)"></div> *@
											<!--end::Image-->
											<!--begin::Wrapper-->
											<div class="d-flex justify-content-between flex-column flex-md-row">
												<!--begin::Content-->
												<div class="flex-grow-1 pt-8 mb-13">
													<!--begin::Table-->
													<div class="table-responsive border-bottom mb-14">
    <table class="table table-responsive" id="quotatinTable">
        <thead>
            <tr class="border-bottom fs-6 fw-bold text-muted text-uppercase">
                <th class="col-2 pb-9 ">Product List</th>
                <th class="col-2 pb-9">Description</th>
                <th class="col-2 pb-9 text-end">Fee</th>
                <th class="col-2 pb-9 text-end">Discount</th>
                <th class="col-2  pb-9 text-end">Net Amt</th>
                <th class="col-2 pe-lg-6 pb-9 text-end">Ex.Rate</th>
                <th class="col-2 pe-lg-6 pb-9 text-end">Amount</th>

            </tr>
        </thead>
        <tbody>
		@foreach (var detail in Model.clientQuotationDeatils)
            {
                <tr class="fw-bold text-gray-700 fs-5 text-end">   
					<td class="d-flex align-items-center pt-11 text-start" style="width:max-content">
                             <i class="fa fa-genderless text-danger fs-1 me-2"></i>
							<p>@detail.ProductName
							 <br>
							@detail.PartnerName
							<br>
							(@detail.WorkflowName)</p>
                    </td>
                  
                    <td class="pt-11">@detail.Description</td>
                   <td class="pt-11">@detail.ServiceFee.ToString("N2")</td>
                    <td class="pt-11">@detail.Discount.ToString("N2")</td>
                    <td class="pt-11 fs-5 pe-lg-6 text-dark fw-bolder">@detail.NetFee.ToString("N2")</td>
					 <td class="pt-11">@detail.ExchangeRate.ToString("N2")</td>
			      <td class="pt-11 fs-5 pe-lg-6 text-dark fw-bolder">@detail.TotalAmount.ToString("N2")</td>
                </tr>
            }
        </tbody>
    </table>
</div>

													<!--end::Table-->
													<!--begin::Section-->
												</div>
												<!--end::Content-->
												<!--begin::Separator-->
												<div class="border-end d-none d-md-block mh-450px mx-9"></div>
												<!--end::Separator-->
												<!--begin::Content-->
												<div class="text-end pt-5">
													<!--begin::Total Amount-->
													<div class="fs-3 fw-bold text-muted mb-3">TOTAL AMOUNT</div>
													@{
							decimal totalAmountSum = Model.clientQuotationDeatils.Sum(detail => detail.TotalAmount);
												}
													<div class="fs-xl-2x fs-2 fw-bolder">AUD @totalAmountSum.ToString("N2")</div>
													@* <div class="fs-xl-2x fs-2 fw-bolder">@string.Format(new System.Globalization.CultureInfo("en-US"), "{0:C}", totalAmountSum)</div> *@

													<div class="text-muted fw-semibold">Taxes included</div>
													<!--end::Total Amount-->
													@* <div class="border-bottom w-100 my-7 my-lg-16"></div> *@
													
												</div>
												<!--end::Content-->
											</div>
											<!--end::Wrapper-->
										</div>
										<!--end::Body-->
										<!-- begin::Footer-->
										<div class="d-flex flex-stack flex-wrap mt-lg-20 pt-13 hide-on-print">
											<!-- begin::Actions-->
											<div class="my-1 me-5">
												<!-- begin::Pint-->
												@* <button type="button" class="btn btn-success my-1 me-12" onclick="window.print();">Print Invoice</button> *@
													<button type="button" class="btn btn-success my-1 me-12 hide-on-print" id="buttonPrint" onclick="printInvoice();">Print Quotation</button>
												<!-- end::Pint-->
												<!-- begin::Download-->
												@* <button type="button" class="btn btn-light-success my-1 hide-on-print">Download</button> *@
												<!-- end::Download-->
											</div>
											<!-- end::Actions-->
											<!-- begin::Action-->
												<button type="button" id="Createbutton" class="btn btn-primary my-1 hide-on-print">Create Quotation</button>
											<!-- end::Action-->
										</div>
										<!-- end::Footer-->
									</div>
									<!-- end::Wrapper-->
								</div>
								<!-- end::Body-->
							</div>
							<!-- end::Invoice 1-->
						</div>
						<!--end::Content container-->
					</div>
					<!--end::Content-->
				</div>
				<!--end::Content wrapper-->
				 
			</div>
			<!--end:::Main-->
		</div>
		<!--end::Wrapper-->
	</div>
	<!--end::Page-->
</div>
</div>
